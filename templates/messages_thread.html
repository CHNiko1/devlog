{% extends "base.html" %}

{% block title %}áƒ©áƒáƒ¢áƒ˜ {{ other.username }}-áƒ—áƒáƒœ{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="card shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-0">ğŸ’¬ áƒ©áƒáƒ¢áƒ˜ {{ other.username }}-áƒ—áƒáƒœ</h5>
                <small class="text-muted">áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ áƒ¨áƒ”áƒ¡áƒáƒ«áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ áƒ›áƒ®áƒáƒšáƒáƒ“ áƒ£áƒ áƒ—áƒ˜áƒ”áƒ áƒ— Follow-áƒ–áƒ”.</small>
            </div>
            <a href="{{ url_for('user_profile', username=other.username) }}" class="btn btn-sm btn-outline-secondary">áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜</a>
        </div>
        <div class="card-body">
            {% if messages %}
                <div class="message-thread d-flex flex-column gap-3 mb-3">
                    {% for m in messages %}
                        <div class="message-bubble {% if m.sender_id == current_user.id %}sent text-end{% else %}received{% endif %}">
                            <div>{{ m.content }}</div>
                            <div class="message-meta mt-1">
                                {% if m.sender_id == current_user.id %}
                                    áƒ—áƒ¥áƒ•áƒ”áƒœ â€¢ {{ m.created_at.strftime('%d.%m.%Y %H:%M') if m.created_at else '' }}
                                {% else %}
                                    {{ other.username }} â€¢ {{ m.created_at.strftime('%d.%m.%Y %H:%M') if m.created_at else '' }}
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="alert alert-info">áƒ¯áƒ”áƒ  áƒáƒ  áƒ’áƒáƒ¥áƒ•áƒ— áƒ“áƒ˜áƒáƒšáƒáƒ’áƒ˜, áƒ’áƒáƒáƒ’áƒ–áƒáƒ•áƒœáƒ” áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ.</div>
            {% endif %}

            <form method="POST" class="mt-3">
                <div class="mb-3">
                    <label for="messageContent" class="form-label">áƒáƒ®áƒáƒšáƒ˜ áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ</label>
                    <textarea class="form-control" id="messageContent" name="content" rows="2" placeholder="áƒ©áƒáƒ¬áƒ”áƒ áƒ” áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% extends "base.html" %}

{% block title %}DevLog â€” áƒ¡áƒ¬áƒáƒ•áƒšáƒ áƒ“áƒ áƒ’áƒáƒ£áƒ–áƒ˜áƒáƒ áƒ” áƒªáƒáƒ“áƒœáƒ{% endblock %}

{% block content %}
<!-- Featured Posts Section -->
<section class="py-5 hero-section">
    <div class="container">
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold mb-3">ğŸš€ DevLog</h1>
            <p class="lead fs-3">áƒ’áƒáƒ£áƒ–áƒ˜áƒáƒ áƒ” áƒ¨áƒ”áƒœáƒ˜ áƒªáƒáƒ“áƒœáƒ áƒ¡áƒ®áƒ•áƒáƒ¡</p>
            <p class="fs-5 text-muted mb-4">áƒ¥áƒáƒ áƒ—áƒ•áƒ”áƒšáƒ˜ Developer-áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒáƒ›áƒ”áƒ–áƒáƒ‘áƒšáƒ</p>
            <div class="d-flex gap-3 justify-content-center">
                <a href="{{ url_for('posts') }}" class="btn btn-primary btn-lg fw-bold">áƒáƒáƒ¡áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒœáƒáƒ®áƒ•áƒ</a>
                <a href="{% if current_user.is_authenticated %}{{ url_for('create_post') }}{% else %}{{ url_for('login') }}{% endif %}" class="btn btn-outline-primary btn-lg fw-bold">ğŸ“ áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜ áƒáƒáƒ¡áƒ¢áƒ˜</a>
            </div>
        </div>
    </div>
</section>

<!-- Featured Posts -->
<section class="py-5 bg-white">
    <div class="container">
        <h2 class="section-title text-center mb-8" style="margin-top: -1rem;">áƒ›áƒáƒáƒ®áƒšáƒáƒ•áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒáƒáƒ¡áƒ¢áƒ”áƒ‘áƒ˜</h2>
        
        {% if posts %}
            <div class="row g-4">
                {% for post in posts[:6] %}
                    <div class="col-md-6 col-lg-4">
                        <div class="card h-100 post-card">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">{{ post.title }}</h5>
                                <div class="mb-3">
                                    <span class="badge badge-language">{{ post.language }}</span>
                                    <span class="badge badge-level">
                                        {% if post.level == 'beginner' %}ğŸŸ¢ áƒ¡áƒ¢áƒáƒŸáƒ˜áƒáƒ áƒ˜ / Trainee
                                        {% elif post.level == 'junior' %}ğŸ”µ áƒ¯áƒ£áƒœáƒ˜áƒáƒ áƒ˜ / Junior
                                        {% elif post.level == 'intermediate' %}ğŸŸ  áƒ¡áƒáƒ¨áƒ£áƒáƒšáƒ / Mid-Level
                                        {% else %}ğŸ”´ áƒ¡áƒ”áƒœáƒ˜áƒáƒ áƒ˜ / Senior
                                        {% endif %}
                                    </span>
                                </div>
                                <p class="card-text text-muted flex-grow-1">
                                    {{ post.content[:120] }}{% if post.content|length > 120 %}...{% endif %}
                                </p>
                                <div class="d-flex justify-content-between align-items-center mt-3 small text-muted">
                                    <a href="{{ url_for('user_profile', username=post.author.username) }}" class="text-decoration-none text-muted">ğŸ‘¤ {{ post.author.username }}</a>
                                    <span>ğŸ“… {{ post.created_at.strftime('%d.%m.%Y') if post.created_at else 'áƒ£áƒªáƒœáƒáƒ‘áƒ˜' }}</span>
                                </div>
                                <div class="d-flex gap-2 mt-3 align-items-center">
                                    <!-- Like Button -->
                                    {% if current_user.is_authenticated %}
                                        {% set user_liked = post.likes|selectattr('author_id', 'equalto', current_user.id)|list|length > 0 %}
                                        <form method="POST" action="{{ url_for('like_post', post_id=post.id) }}" style="display: inline;">
                                            <button type="submit" class="btn btn-sm {% if user_liked %}btn-danger{% else %}btn-outline-danger{% endif %}" title="áƒ›áƒáƒ¬áƒáƒœáƒ”áƒ‘áƒ">
                                                {% if user_liked %}â¤ï¸ {{ post.likes|length }}{% else %}ğŸ¤ {{ post.likes|length }}{% endif %}
                                            </button>
                                        </form>
                                    {% else %}
                                        <a href="{{ url_for('login') }}" class="btn btn-sm btn-outline-danger" title="áƒ›áƒáƒ¬áƒáƒœáƒ”áƒ‘áƒ">ğŸ¤ {{ post.likes|length }}</a>
                                    {% endif %}

                                    <!-- Repost Button -->
                                    {% if current_user.is_authenticated %}
                                        {% set user_reposted = post.reposts|selectattr('author_id', 'equalto', current_user.id)|list|length > 0 %}
                                        <form method="POST" action="{{ url_for('repost_post', post_id=post.id) }}" style="display: inline;">
                                            <button type="submit" class="btn btn-sm {% if user_reposted %}btn-info{% else %}btn-outline-info{% endif %}" title="áƒ áƒ”áƒáƒáƒ¡áƒ¢áƒ˜">
                                                {% if user_reposted %}ğŸ”„ {{ post.reposts|length }}{% else %}â†—ï¸ {{ post.reposts|length }}{% endif %}
                                            </button>
                                        </form>
                                    {% else %}
                                        <a href="{{ url_for('login') }}" class="btn btn-sm btn-outline-info" title="áƒ áƒ”áƒáƒáƒ¡áƒ¢áƒ˜">â†—ï¸ {{ post.reposts|length }}</a>
                                    {% endif %}

                                    <a href="{{ url_for('post_detail', post_id=post.id) }}" class="btn btn-primary btn-sm ms-auto">áƒ¬áƒáƒ˜áƒ™áƒ˜áƒ—áƒ®áƒ”</a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="text-center mt-5">
                <a href="{{ url_for('posts') }}" class="btn btn-outline-primary btn-lg">áƒ§áƒ•áƒ”áƒšáƒ áƒáƒáƒ¡áƒ¢áƒ˜</a>
            </div>
        {% else %}
            <div class="alert alert-info text-center" role="alert">
                <h5>ğŸ“­ áƒáƒáƒ¡áƒ¢áƒ”áƒ‘áƒ˜ áƒ¯áƒ”áƒ  áƒáƒ  áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ¡</h5>
                <p>áƒ˜áƒ§áƒáƒ•áƒ˜ áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜, áƒ•áƒ˜áƒœáƒª áƒ“áƒáƒáƒáƒ¡áƒ¢áƒáƒ•áƒ¡ DevLog-áƒ–áƒ”</p>
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('create_post') }}" class="btn btn-primary">áƒáƒáƒ¡áƒ¢áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-primary">áƒ¨áƒ”áƒ¡áƒ•áƒšáƒ áƒ“áƒ áƒ“áƒáƒ¬áƒ§áƒ”áƒ‘áƒ</a>
                {% endif %}
            </div>
        {% endif %}
    </div>
</section>

{% endblock %}
